
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    // Reglas para la carpeta de imágenes de productos
    match /products/{productId}/{imageName} {
      // Cualquiera puede leer las imágenes de los productos (necesario para la tienda)
      allow read;
      // Solo usuarios autenticados pueden escribir (subir, actualizar, borrar)
      // En una app más compleja, se podría restringir por rol aquí también.
      allow write: if request.auth != null;
    }
    
    // Reglas más restrictivas para otras carpetas (si las hubiera)
    match /{allPaths=**} {
      allow read, write: if false; // Por defecto, denegar todo lo demás
    }
  }
}
